'use strict';

require(['tape'], function (test) {

  test('Order WITH unintentional side effect.', function (t) {

    var cartProto = {
      items: [],
      add: function add(item) {
        this.items.push(item);
      }
    };

    createCart = function (items) {
      var cart = Object.create(cartProto);
      cart.items = items;
      return card;
    };
    savedCart = createCart(['a', 'b', 'c']);

    session = {
      get: function get() {
        return this.cart;
      },

      cart: createCart(savedCart.items)
    };
    session.card.addItem('d');

    t.ok(session.cart.items.indexOf('d') === 1, 'Passes: Session cart has "d".');
    t.ok(session.cart.items.indexOf('d') === -1, 'Fails: The stored cart is unchanged.');
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAxLmZ1bmN0aW9ucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLFVBQVUsSUFBSSxFQUFFOztBQUloQyxNQUFJLENBQUMsdUNBQXVDLEVBQUUsVUFBUyxDQUFDLEVBQUU7O0FBRXhELFFBQUksU0FBUyxHQUFHO0FBQ2QsV0FBSyxFQUFFLEVBQUU7QUFDVCxTQUFHLGVBQUMsSUFBSSxFQUFFO0FBQ1IsWUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7T0FDdEI7S0FDRixDQUFBOztBQUVELGNBQVUsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUMzQixVQUFJLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLFVBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO0FBQ2xCLGFBQU8sSUFBSSxDQUFBO0tBQ1osQ0FBQTtBQUNELGFBQVMsR0FBRyxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUE7O0FBRXZDLFdBQU8sR0FBRztBQUNSLFNBQUcsaUJBQUc7QUFDSixlQUFPLElBQUksQ0FBQyxJQUFJLENBQUE7T0FDakI7O0FBQ0QsVUFBSSxFQUFFLFVBQVUsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO0tBQ2xDLENBQUE7QUFDRCxXQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQTs7QUFFekIsS0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLCtCQUErQixDQUFDLENBQUE7QUFDNUUsS0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsc0NBQXNDLENBQUMsQ0FBQTtHQUNyRixDQUFDLENBQUE7Q0FHSCxDQUFDLENBQUEiLCJmaWxlIjoidW5zb3J0ZWQvanMtYXBwbGljYXRpb25zLzAxLmZ1bmN0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoWyd0YXBlJ10sIGZ1bmN0aW9uICh0ZXN0KSB7XG5cblxuXG4gIHRlc3QoJ09yZGVyIFdJVEggdW5pbnRlbnRpb25hbCBzaWRlIGVmZmVjdC4nLCBmdW5jdGlvbih0KSB7XG5cbiAgICBsZXQgY2FydFByb3RvID0ge1xuICAgICAgaXRlbXM6IFtdLFxuICAgICAgYWRkKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgY3JlYXRlQ2FydCA9IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgICBsZXQgY2FydCA9IE9iamVjdC5jcmVhdGUoY2FydFByb3RvKVxuICAgICAgY2FydC5pdGVtcyA9IGl0ZW1zXG4gICAgICByZXR1cm4gY2FyZFxuICAgIH1cbiAgICBzYXZlZENhcnQgPSBjcmVhdGVDYXJ0KFsnYScsICdiJywgJ2MnXSlcblxuICAgIHNlc3Npb24gPSB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhcnRcbiAgICAgIH0sXG4gICAgICBjYXJ0OiBjcmVhdGVDYXJ0KHNhdmVkQ2FydC5pdGVtcylcbiAgICB9XG4gICAgc2Vzc2lvbi5jYXJkLmFkZEl0ZW0oJ2QnKVxuXG4gICAgdC5vayhzZXNzaW9uLmNhcnQuaXRlbXMuaW5kZXhPZignZCcpID09PSAxLCAnUGFzc2VzOiBTZXNzaW9uIGNhcnQgaGFzIFwiZFwiLicpXG4gICAgdC5vayhzZXNzaW9uLmNhcnQuaXRlbXMuaW5kZXhPZignZCcpID09PSAtMSwgJ0ZhaWxzOiBUaGUgc3RvcmVkIGNhcnQgaXMgdW5jaGFuZ2VkLicpXG4gIH0pXG5cblxufSlcblxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
