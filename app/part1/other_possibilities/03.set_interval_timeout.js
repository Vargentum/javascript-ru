"use strict";

/*Задача 1:
Напишите функцию printNumbersInterval(), которая последовательно выводит
в консоль числа от 1 до 20, с интервалом между числами 100мс.
То есть, весь вывод должен занимать 2000мс,
в течение которых каждые 100мс в консоли появляется очередное число.

Функция должна использовать setInterval.
*/

function printNumbersInterval(max) {
  var i = 0;

  function printNums() {
    i++;
    console.log(i);
    if (i >= max) clearInterval(timer);
  }
  var timer = setInterval(printNums, 100);
}
// printNumbersInterval(20)

/*Задача 2:
Сделайте то же самое, что в задаче Вывод чисел каждые 100мс,
но с использованием рекурсивного setTimeout вместо setInterval.
*/

// var i = 0;
// setTimeout(function printNumbersRecursive() {
//   i++;
//   console.log(i);

//   if (i < 20) setTimeout(printNumbersRecursive, 100)
// }, 100)

/*Задача 3 и 4:

если во время отсчета планировщика,
интерпретатор начинает выполнять ресурсоемкую функцию, время исполнения которой
больше времени отсчета - ОТЛОЖЕННЫЙ планировщик ждет своей очереди,
после чего СРАЗУ выполняется.

*/

/*Задача 6:

Напишите функцию delay(f, ms), 
которая возвращает обёртку вокруг f,
задерживающую вызов на ms миллисекунд.
*/
function f(x) {
  console.log(x);
}

function delay(f, ms) {
  return function () {
    var self = this;
    var args = arguments;

    setTimeout(function () {
      f.apply(self, args);
    }, ms);
  };
}

// var f1 = delay(f, 2000);
// var f2 = delay(f, 4000);
// f1('test')
// f2('rest')

/*Задача 7: 

Напишите функцию debounce(f, ms), которая возвращает обёртку,
которая передаёт вызов f не чаще, чем раз в ms миллисекунд.
“Лишние” вызовы игнорируются. Все аргументы и контекст — передаются.


function f() { ... }


Решение: использовать флаг:
 - в момент инициализации функции - true
 - каждые ms переходит в true
 - передача вызова только при true
 - вместе с передачей вызова сбрасываем в false

*/

function debounce(f, ms) {
  var isCallable = true;

  setInterval(function () {
    isCallable = true;
  }, ms);

  return function () {
    if (isCallable) {
      isCallable = false;
      f.apply(this, arguments);
    }
  };
}

// var fD = debounce(f, 1000);
// setTimeout( function() { fD(1) }, 1);   // выполнится
// setTimeout( function() { fD(2) }, 100); // игнор (прошло только 100мс)
// setTimeout( function() { fD(3) }, 1100); // выполнится
// setTimeout( function() { fD(4) }, 1500); // игнор

/*Задача: 
Напишите функцию throttle(f, ms) — “тормозилку”,
которая возвращает обёртку,
передающую вызов f не чаще, чем раз в ms миллисекунд.

У этой функции должно быть важное существенное отличие от debounce: 
если игнорируемый вызов оказался последним, 
т.е. после него до окончания задержки ничего нет — то он выполнится.

*/

function throttle(f, ms) {
  var isCallable = true;
  var start = performance.now();

  setInterval(function () {
    isCallable = true;
  }, ms);

  return function () {
    if (isCallable) {
      isCallable = false;
      f.apply(this, arguments);
    }
  };
}

var fT = throttle(f, 1000);
setTimeout(function () {
  fT(1);
}, 1); // выполнится
setTimeout(function () {
  fT(2);
}, 100); // игнор (прошло только 100мс)
setTimeout(function () {
  fT(3);
}, 1100); // выполнится
setTimeout(function () {
  fT(4);
}, 1500); // игнор
setTimeout(function () {
  fT(5);
}, 1700); // выполнится (debounce - нет)
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAzLnNldF9pbnRlcnZhbF90aW1lb3V0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBU0EsU0FBUyxvQkFBb0IsQ0FBRSxHQUFHLEVBQUU7QUFDbEMsTUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUVWLFdBQVMsU0FBUyxHQUFHO0FBQ25CLEtBQUMsRUFBRSxDQUFDO0FBQ0osV0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNmLFFBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7R0FDcEM7QUFDRCxNQUFJLEtBQUssR0FBRyxXQUFXLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFBO0NBQ3hDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsQUF1Q0QsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQ1osU0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUNoQjs7QUFFRCxTQUFTLEtBQUssQ0FBRSxDQUFDLEVBQUUsRUFBRSxFQUFFO0FBQ3JCLFNBQU8sWUFBWTtBQUNqQixRQUFJLElBQUksR0FBRyxJQUFJLENBQUM7QUFDaEIsUUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDOztBQUVyQixjQUFVLENBQUMsWUFBVTtBQUNuQixPQUFDLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztLQUNyQixFQUFFLEVBQUUsQ0FBQyxDQUFBO0dBQ1AsQ0FBQTtDQUNGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsQUEwQkQsU0FBUyxRQUFRLENBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRTtBQUN4QixNQUFJLFVBQVUsR0FBRyxJQUFJLENBQUM7O0FBRXRCLGFBQVcsQ0FBQyxZQUFVO0FBQ3BCLGNBQVUsR0FBRyxJQUFJLENBQUM7R0FDbkIsRUFBRSxFQUFFLENBQUMsQ0FBQTs7QUFFTixTQUFPLFlBQVc7QUFDaEIsUUFBSSxVQUFVLEVBQUU7QUFDZCxnQkFBVSxHQUFHLEtBQUssQ0FBQztBQUNuQixPQUFDLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQztLQUMxQjtHQUNGLENBQUE7Q0FDRjs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLEFBc0JELFNBQVMsUUFBUSxDQUFFLENBQUMsRUFBRSxFQUFFLEVBQUU7QUFDeEIsTUFBSSxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3RCLE1BQUksS0FBSyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQTs7QUFFN0IsYUFBVyxDQUFDLFlBQVU7QUFDcEIsY0FBVSxHQUFHLElBQUksQ0FBQztHQUNuQixFQUFFLEVBQUUsQ0FBQyxDQUFBOztBQUVOLFNBQU8sWUFBVztBQUNoQixRQUFJLFVBQVUsRUFBRTtBQUNkLGdCQUFVLEdBQUcsS0FBSyxDQUFDO0FBQ25CLE9BQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0tBQzFCO0dBQ0YsQ0FBQTtDQUNGOztBQUdELElBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDM0IsVUFBVSxDQUFFLFlBQVc7QUFBRSxJQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FBRSxFQUFFLENBQUMsQ0FBQztBQUFDLEFBQ3JDLFVBQVUsQ0FBRSxZQUFXO0FBQUUsSUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO0NBQUUsRUFBRSxHQUFHLENBQUM7QUFBQyxBQUN2QyxVQUFVLENBQUUsWUFBVztBQUFFLElBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQTtDQUFFLEVBQUUsSUFBSSxDQUFDO0FBQUMsQUFDeEMsVUFBVSxDQUFFLFlBQVc7QUFBRSxJQUFFLENBQUMsQ0FBQyxDQUFDLENBQUE7Q0FBRSxFQUFFLElBQUksQ0FBQztBQUFDLEFBQ3hDLFVBQVUsQ0FBRSxZQUFXO0FBQUUsSUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFBO0NBQUUsRUFBRSxJQUFJLENBQUM7QUFBQyIsImZpbGUiOiJwYXJ0MS9vdGhlcl9wb3NzaWJpbGl0aWVzLzAzLnNldF9pbnRlcnZhbF90aW1lb3V0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyrQl9Cw0LTQsNGH0LAgMTpcbtCd0LDQv9C40YjQuNGC0LUg0YTRg9C90LrRhtC40Y4gcHJpbnROdW1iZXJzSW50ZXJ2YWwoKSwg0LrQvtGC0L7RgNCw0Y8g0L/QvtGB0LvQtdC00L7QstCw0YLQtdC70YzQvdC+INCy0YvQstC+0LTQuNGCXG7QsiDQutC+0L3RgdC+0LvRjCDRh9C40YHQu9CwINC+0YIgMSDQtNC+IDIwLCDRgSDQuNC90YLQtdGA0LLQsNC70L7QvCDQvNC10LbQtNGDINGH0LjRgdC70LDQvNC4IDEwMNC80YEuXG7QotC+INC10YHRgtGMLCDQstC10YHRjCDQstGL0LLQvtC0INC00L7Qu9C20LXQvSDQt9Cw0L3QuNC80LDRgtGMIDIwMDDQvNGBLFxu0LIg0YLQtdGH0LXQvdC40LUg0LrQvtGC0L7RgNGL0YUg0LrQsNC20LTRi9C1IDEwMNC80YEg0LIg0LrQvtC90YHQvtC70Lgg0L/QvtGP0LLQu9GP0LXRgtGB0Y8g0L7Rh9C10YDQtdC00L3QvtC1INGH0LjRgdC70L4uXG5cbtCk0YPQvdC60YbQuNGPINC00L7Qu9C20L3QsCDQuNGB0L/QvtC70YzQt9C+0LLQsNGC0Ywgc2V0SW50ZXJ2YWwuXG4qL1xuXG5mdW5jdGlvbiBwcmludE51bWJlcnNJbnRlcnZhbCAobWF4KSB7XG4gIHZhciBpID0gMDtcblxuICBmdW5jdGlvbiBwcmludE51bXMoKSB7XG4gICAgaSsrO1xuICAgIGNvbnNvbGUubG9nKGkpO1xuICAgIGlmIChpID49IG1heCkgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gIH1cbiAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwocHJpbnROdW1zLCAxMDApXG59XG4vLyBwcmludE51bWJlcnNJbnRlcnZhbCgyMClcblxuXG5cblxuXG4vKtCX0LDQtNCw0YfQsCAyOlxu0KHQtNC10LvQsNC50YLQtSDRgtC+INC20LUg0YHQsNC80L7QtSwg0YfRgtC+INCyINC30LDQtNCw0YfQtSDQktGL0LLQvtC0INGH0LjRgdC10Lsg0LrQsNC20LTRi9C1IDEwMNC80YEsXG7QvdC+INGBINC40YHQv9C+0LvRjNC30L7QstCw0L3QuNC10Lwg0YDQtdC60YPRgNGB0LjQstC90L7Qs9C+IHNldFRpbWVvdXQg0LLQvNC10YHRgtC+IHNldEludGVydmFsLlxuKi9cblxuLy8gdmFyIGkgPSAwO1xuLy8gc2V0VGltZW91dChmdW5jdGlvbiBwcmludE51bWJlcnNSZWN1cnNpdmUoKSB7XG4vLyAgIGkrKztcbi8vICAgY29uc29sZS5sb2coaSk7XG5cbi8vICAgaWYgKGkgPCAyMCkgc2V0VGltZW91dChwcmludE51bWJlcnNSZWN1cnNpdmUsIDEwMClcbi8vIH0sIDEwMClcblxuXG5cbi8q0JfQsNC00LDRh9CwIDMg0LggNDpcblxu0LXRgdC70Lgg0LLQviDQstGA0LXQvNGPINC+0YLRgdGH0LXRgtCwINC/0LvQsNC90LjRgNC+0LLRidC40LrQsCxcbtC40L3RgtC10YDQv9GA0LXRgtCw0YLQvtGAINC90LDRh9C40L3QsNC10YIg0LLRi9C/0L7Qu9C90Y/RgtGMINGA0LXRgdGD0YDRgdC+0LXQvNC60YPRjiDRhNGD0L3QutGG0LjRjiwg0LLRgNC10LzRjyDQuNGB0L/QvtC70L3QtdC90LjRjyDQutC+0YLQvtGA0L7QuVxu0LHQvtC70YzRiNC1INCy0YDQtdC80LXQvdC4INC+0YLRgdGH0LXRgtCwIC0g0J7QotCb0J7QltCV0J3QndCr0Jkg0L/Qu9Cw0L3QuNGA0L7QstGJ0LjQuiDQttC00LXRgiDRgdCy0L7QtdC5INC+0YfQtdGA0LXQtNC4LFxu0L/QvtGB0LvQtSDRh9C10LPQviDQodCg0JDQl9CjINCy0YvQv9C+0LvQvdGP0LXRgtGB0Y8uXG5cbiovXG5cblxuXG4vKtCX0LDQtNCw0YfQsCA2OlxuXG7QndCw0L/QuNGI0LjRgtC1INGE0YPQvdC60YbQuNGOIGRlbGF5KGYsIG1zKSwgXG7QutC+0YLQvtGA0LDRjyDQstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0ZHRgNGC0LrRgyDQstC+0LrRgNGD0LMgZixcbtC30LDQtNC10YDQttC40LLQsNGO0YnRg9GOINCy0YvQt9C+0LIg0L3QsCBtcyDQvNC40LvQu9C40YHQtdC60YPQvdC0LlxuKi9cbmZ1bmN0aW9uIGYoeCkge1xuICBjb25zb2xlLmxvZyh4KTtcbn1cblxuZnVuY3Rpb24gZGVsYXkgKGYsIG1zKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgZi5hcHBseShzZWxmLCBhcmdzKTtcbiAgICB9LCBtcylcbiAgfVxufVxuXG4vLyB2YXIgZjEgPSBkZWxheShmLCAyMDAwKTtcbi8vIHZhciBmMiA9IGRlbGF5KGYsIDQwMDApO1xuLy8gZjEoJ3Rlc3QnKVxuLy8gZjIoJ3Jlc3QnKVxuXG5cbi8q0JfQsNC00LDRh9CwIDc6IFxuXG7QndCw0L/QuNGI0LjRgtC1INGE0YPQvdC60YbQuNGOIGRlYm91bmNlKGYsIG1zKSwg0LrQvtGC0L7RgNCw0Y8g0LLQvtC30LLRgNCw0YnQsNC10YIg0L7QsdGR0YDRgtC60YMsXG7QutC+0YLQvtGA0LDRjyDQv9C10YDQtdC00LDRkdGCINCy0YvQt9C+0LIgZiDQvdC1INGH0LDRidC1LCDRh9C10Lwg0YDQsNC3INCyIG1zINC80LjQu9C70LjRgdC10LrRg9C90LQuXG7igJzQm9C40YjQvdC40LXigJ0g0LLRi9C30L7QstGLINC40LPQvdC+0YDQuNGA0YPRjtGC0YHRjy4g0JLRgdC1INCw0YDQs9GD0LzQtdC90YLRiyDQuCDQutC+0L3RgtC10LrRgdGCIOKAlCDQv9C10YDQtdC00LDRjtGC0YHRjy5cblxuXG5mdW5jdGlvbiBmKCkgeyAuLi4gfVxuXG5cbtCg0LXRiNC10L3QuNC1OiDQuNGB0L/QvtC70YzQt9C+0LLQsNGC0Ywg0YTQu9Cw0LM6XG4gLSDQsiDQvNC+0LzQtdC90YIg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Lgg0YTRg9C90LrRhtC40LggLSB0cnVlXG4gLSDQutCw0LbQtNGL0LUgbXMg0L/QtdGA0LXRhdC+0LTQuNGCINCyIHRydWVcbiAtINC/0LXRgNC10LTQsNGH0LAg0LLRi9C30L7QstCwINGC0L7Qu9GM0LrQviDQv9GA0LggdHJ1ZVxuIC0g0LLQvNC10YHRgtC1INGBINC/0LXRgNC10LTQsNGH0LXQuSDQstGL0LfQvtCy0LAg0YHQsdGA0LDRgdGL0LLQsNC10Lwg0LIgZmFsc2VcblxuKi9cblxuZnVuY3Rpb24gZGVib3VuY2UgKGYsIG1zKSB7XG4gIHZhciBpc0NhbGxhYmxlID0gdHJ1ZTtcblxuICBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgIGlzQ2FsbGFibGUgPSB0cnVlO1xuICB9LCBtcylcblxuICByZXR1cm4gZnVuY3Rpb24gKCl7XG4gICAgaWYgKGlzQ2FsbGFibGUpIHtcbiAgICAgIGlzQ2FsbGFibGUgPSBmYWxzZTtcbiAgICAgIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gdmFyIGZEID0gZGVib3VuY2UoZiwgMTAwMCk7XG4vLyBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsgZkQoMSkgfSwgMSk7ICAgLy8g0LLRi9C/0L7Qu9C90LjRgtGB0Y9cbi8vIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkgeyBmRCgyKSB9LCAxMDApOyAvLyDQuNCz0L3QvtGAICjQv9GA0L7RiNC70L4g0YLQvtC70YzQutC+IDEwMNC80YEpXG4vLyBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsgZkQoMykgfSwgMTEwMCk7IC8vINCy0YvQv9C+0LvQvdC40YLRgdGPXG4vLyBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsgZkQoNCkgfSwgMTUwMCk7IC8vINC40LPQvdC+0YBcblxuXG5cbi8q0JfQsNC00LDRh9CwOiBcbtCd0LDQv9C40YjQuNGC0LUg0YTRg9C90LrRhtC40Y4gdGhyb3R0bGUoZiwgbXMpIOKAlCDigJzRgtC+0YDQvNC+0LfQuNC70LrRg+KAnSxcbtC60L7RgtC+0YDQsNGPINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC+0LHRkdGA0YLQutGDLFxu0L/QtdGA0LXQtNCw0Y7RidGD0Y4g0LLRi9C30L7QsiBmINC90LUg0YfQsNGJ0LUsINGH0LXQvCDRgNCw0Lcg0LIgbXMg0LzQuNC70LvQuNGB0LXQutGD0L3QtC5cblxu0KMg0Y3RgtC+0Lkg0YTRg9C90LrRhtC40Lgg0LTQvtC70LbQvdC+INCx0YvRgtGMINCy0LDQttC90L7QtSDRgdGD0YnQtdGB0YLQstC10L3QvdC+0LUg0L7RgtC70LjRh9C40LUg0L7RgiBkZWJvdW5jZTogXG7QtdGB0LvQuCDQuNCz0L3QvtGA0LjRgNGD0LXQvNGL0Lkg0LLRi9C30L7QsiDQvtC60LDQt9Cw0LvRgdGPINC/0L7RgdC70LXQtNC90LjQvCwgXG7Rgi7QtS4g0L/QvtGB0LvQtSDQvdC10LPQviDQtNC+INC+0LrQvtC90YfQsNC90LjRjyDQt9Cw0LTQtdGA0LbQutC4INC90LjRh9C10LPQviDQvdC10YIg4oCUINGC0L4g0L7QvSDQstGL0L/QvtC70L3QuNGC0YHRjy5cblxuKi9cblxuXG5mdW5jdGlvbiB0aHJvdHRsZSAoZiwgbXMpIHtcbiAgdmFyIGlzQ2FsbGFibGUgPSB0cnVlO1xuICB2YXIgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKVxuXG4gIHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gICAgaXNDYWxsYWJsZSA9IHRydWU7XG4gIH0sIG1zKVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKXtcbiAgICBpZiAoaXNDYWxsYWJsZSkge1xuICAgICAgaXNDYWxsYWJsZSA9IGZhbHNlO1xuICAgICAgZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxufVxuXG5cbnZhciBmVCA9IHRocm90dGxlKGYsIDEwMDApO1xuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7IGZUKDEpIH0sIDEpOyAgIC8vINCy0YvQv9C+0LvQvdC40YLRgdGPXG5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsgZlQoMikgfSwgMTAwKTsgLy8g0LjQs9C90L7RgCAo0L/RgNC+0YjQu9C+INGC0L7Qu9GM0LrQviAxMDDQvNGBKVxuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7IGZUKDMpIH0sIDExMDApOyAvLyDQstGL0L/QvtC70L3QuNGC0YHRj1xuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7IGZUKDQpIH0sIDE1MDApOyAvLyDQuNCz0L3QvtGAXG5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHsgZlQoNSkgfSwgMTcwMCk7IC8vINCy0YvQv9C+0LvQvdC40YLRgdGPIChkZWJvdW5jZSAtINC90LXRgilcblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
