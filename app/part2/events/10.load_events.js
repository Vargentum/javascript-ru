'use strict';

/*
  script.onload / .onerror (ie8-)

    load - detects when script is loaded and executed
      
      inside load handler you have access to script:
        - functions 
        - variables ...

    error - when script load is fails (not execution errors!)


  Other resources:
    img - support load / error in all browsers

    iframe - only load event both for success / error states (all browsers)


  Loading external script:
    - create `script` container
    - set correct `src`
    - append container to body

*/

/* Task 1

Реализуйте «красивый» (HTML) аналог alt при помощи CSS/JavaScript,
который затем будет заменён картинкой сразу же как только она загрузится. 
А если загрузка не состоится – то не заменён.

Full decision: 
http://plnkr.co/edit/veEBilbP3YQOk5cJs2CG?p=preview
*/

function task1() {

  var handleImgLoad = function handleImgLoad(e) {
    var img = e.currentTarget;
    $('.img-replace').filter(function (c) {
      return c.dataset.alt === img.src;
    }).forEach(function (c) {
      c.parentElement.replaceChild(img, c);
      img.classList.add('img-replace');
    });
  };

  $('img').forEach(function (img) {
    img.addEventListener('load', handleImgLoad);
  });
}
// task1()

/*Task 2

Создайте функцию preloadImages(sources, callback),
которая предзагружает изображения из массива sources,
и после загрузки вызывает функцию callback.

Пример использования:
addScripts(["1.jpg", "2.jpg", "3.jpg"], callback);

Если вдруг возникает ошибка при загрузке – 
считаем такое изображение загруженным, чтобы не ломать поток выполнения.


Desicion: 
http://plnkr.co/edit/IHHqDRA0IPrW58SqJvfx?p=preview
*/

/*

Создайте функцию addScript(src, callback),
которая загружает скрипт с данным src, и после его загрузки 
и выполнения вызывает функцию callback.

Сделал через модификацию функции из task2
*/

function task3() {

  var Source = function Source(type, src) {
    var source = document.createElement(type);
    source.src = src;
    document.body.appendChild(source);
    return source;
  };

  var preloadSources = function preloadSources(type, sources, callback) {
    var promises = [];

    sources.forEach(function (src) {
      var source = Source(type, src);

      promises.push(new Promise(function (resolve, reject) {
        source.onload = function () {
          return resolve('Loaded from ' + source.src);
        };
        source.onerror = function () {
          return reject('Not loaded from ' + source.src);
        };
      }));
    });

    Promise.all(promises).then(function () {
      callback();
    }, function (error) {
      throw new Error(error);
    });
  };

  preloadSources('script', ["https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.12/d3.min.js", "https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js"], function () {
    console.log(d3);
    console.log(Raphael(10, 50, 320, 200));
  });

  /*Part 3.2 (images)*/

  var sources = ["https://js.cx/images-load/1.jpg", "https://js.cx/images-load/2.jpg", "https://js.cx/images-load/3.jpg", "https://upload.wikimedia.org/wikipedia/commons/c/cf/Frog_on_river_4000x3000_26-09-2010_11-01am_2mb.jpg"];
  for (var i = 0; i < sources.length; i++) {
    sources[i] += '?' + Math.random(); // добавляем параметр, чтобы без кеша (для теста)
  }

  /** если картинка загружена, то можно будет сразу получить её ширину
   * создадим все картинки и проверим, есть ли у них ширина
   */
  function testLoaded(state) {
    var widthSum = 0;
    for (var i = 0; i < sources.length; i++) {
      var img = document.createElement('img');
      img.src = sources[i];
      widthSum += img.width;
    }
    // каждое изображение 100x100, общая ширина должна быть 300px
    console.log(state, widthSum);
  }

  // до загрузки - выведет 0
  testLoaded('before');

  // после загрузки - выведет суммарную ширину всех загруженных картинок
  preloadSources('img', sources, testLoaded.bind(null, 'after'));
}
// task3()
//# sourceMappingURL=data:application/json;base64,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akMsd0dBQXdHLENBQ3pHLENBQUM7QUFDRixPQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN2QyxXQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFBQyxHQUNuQzs7Ozs7QUFBQSxBQUtELFdBQVMsVUFBVSxDQUFDLEtBQUssRUFBRTtBQUN6QixRQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDakIsU0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDdkMsVUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN4QyxTQUFHLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyQixjQUFRLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQztLQUN2Qjs7QUFBQSxBQUVELFdBQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0dBQzlCOzs7QUFBQSxBQUdELFlBQVUsQ0FBQyxRQUFRLENBQUM7OztBQUFDLEFBR3JCLGdCQUFjLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0NBRWhFOztBQUFBIiwiZmlsZSI6InBhcnQyL2V2ZW50cy8xMC5sb2FkX2V2ZW50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gIHNjcmlwdC5vbmxvYWQgLyAub25lcnJvciAoaWU4LSlcblxuICAgIGxvYWQgLSBkZXRlY3RzIHdoZW4gc2NyaXB0IGlzIGxvYWRlZCBhbmQgZXhlY3V0ZWRcbiAgICAgIFxuICAgICAgaW5zaWRlIGxvYWQgaGFuZGxlciB5b3UgaGF2ZSBhY2Nlc3MgdG8gc2NyaXB0OlxuICAgICAgICAtIGZ1bmN0aW9ucyBcbiAgICAgICAgLSB2YXJpYWJsZXMgLi4uXG5cbiAgICBlcnJvciAtIHdoZW4gc2NyaXB0IGxvYWQgaXMgZmFpbHMgKG5vdCBleGVjdXRpb24gZXJyb3JzISlcblxuXG4gIE90aGVyIHJlc291cmNlczpcbiAgICBpbWcgLSBzdXBwb3J0IGxvYWQgLyBlcnJvciBpbiBhbGwgYnJvd3NlcnNcblxuICAgIGlmcmFtZSAtIG9ubHkgbG9hZCBldmVudCBib3RoIGZvciBzdWNjZXNzIC8gZXJyb3Igc3RhdGVzIChhbGwgYnJvd3NlcnMpXG5cblxuICBMb2FkaW5nIGV4dGVybmFsIHNjcmlwdDpcbiAgICAtIGNyZWF0ZSBgc2NyaXB0YCBjb250YWluZXJcbiAgICAtIHNldCBjb3JyZWN0IGBzcmNgXG4gICAgLSBhcHBlbmQgY29udGFpbmVyIHRvIGJvZHlcblxuKi9cblxuXG5cblxuLyogVGFzayAxXG5cbtCg0LXQsNC70LjQt9GD0LnRgtC1IMKr0LrRgNCw0YHQuNCy0YvQucK7IChIVE1MKSDQsNC90LDQu9C+0LMgYWx0INC/0YDQuCDQv9C+0LzQvtGJ0LggQ1NTL0phdmFTY3JpcHQsXG7QutC+0YLQvtGA0YvQuSDQt9Cw0YLQtdC8INCx0YPQtNC10YIg0LfQsNC80LXQvdGR0L0g0LrQsNGA0YLQuNC90LrQvtC5INGB0YDQsNC30YMg0LbQtSDQutCw0Log0YLQvtC70YzQutC+INC+0L3QsCDQt9Cw0LPRgNGD0LfQuNGC0YHRjy4gXG7QkCDQtdGB0LvQuCDQt9Cw0LPRgNGD0LfQutCwINC90LUg0YHQvtGB0YLQvtC40YLRgdGPIOKAkyDRgtC+INC90LUg0LfQsNC80LXQvdGR0L0uXG5cbkZ1bGwgZGVjaXNpb246IFxuaHR0cDovL3BsbmtyLmNvL2VkaXQvdmVFQmlsYlAzWVFPazVjSnMyQ0c/cD1wcmV2aWV3XG4qL1xuXG5cbmZ1bmN0aW9uIHRhc2sxICgpIHtcblxuICBsZXQgaGFuZGxlSW1nTG9hZCA9IGUgPT4ge1xuICAgICAgbGV0IGltZyA9IGUuY3VycmVudFRhcmdldFxuICAgICAgJCgnLmltZy1yZXBsYWNlJykuZmlsdGVyKGMgPT4gYy5kYXRhc2V0LmFsdCA9PT0gaW1nLnNyYylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjLnBhcmVudEVsZW1lbnQucmVwbGFjZUNoaWxkKGltZywgYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoJ2ltZy1yZXBsYWNlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICB9XG5cbiAgJCgnaW1nJykuZm9yRWFjaChpbWcgPT4ge1xuICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgaGFuZGxlSW1nTG9hZClcbiAgfSlcbn1cbi8vIHRhc2sxKClcblxuXG5cbi8qVGFzayAyXG5cbtCh0L7Qt9C00LDQudGC0LUg0YTRg9C90LrRhtC40Y4gcHJlbG9hZEltYWdlcyhzb3VyY2VzLCBjYWxsYmFjayksXG7QutC+0YLQvtGA0LDRjyDQv9GA0LXQtNC30LDQs9GA0YPQttCw0LXRgiDQuNC30L7QsdGA0LDQttC10L3QuNGPINC40Lcg0LzQsNGB0YHQuNCy0LAgc291cmNlcyxcbtC4INC/0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDQstGL0LfRi9Cy0LDQtdGCINGE0YPQvdC60YbQuNGOIGNhbGxiYWNrLlxuXG7Qn9GA0LjQvNC10YAg0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40Y86XG5hZGRTY3JpcHRzKFtcIjEuanBnXCIsIFwiMi5qcGdcIiwgXCIzLmpwZ1wiXSwgY2FsbGJhY2spO1xuXG7QldGB0LvQuCDQstC00YDRg9CzINCy0L7Qt9C90LjQutCw0LXRgiDQvtGI0LjQsdC60LAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg4oCTIFxu0YHRh9C40YLQsNC10Lwg0YLQsNC60L7QtSDQuNC30L7QsdGA0LDQttC10L3QuNC1INC30LDQs9GA0YPQttC10L3QvdGL0LwsINGH0YLQvtCx0Ysg0L3QtSDQu9C+0LzQsNGC0Ywg0L/QvtGC0L7QuiDQstGL0L/QvtC70L3QtdC90LjRjy5cblxuXG5EZXNpY2lvbjogXG5odHRwOi8vcGxua3IuY28vZWRpdC9JSEhxRFJBMElQclc1OFNxSnZmeD9wPXByZXZpZXdcbiovXG5cblxuXG5cbi8qXG5cbtCh0L7Qt9C00LDQudGC0LUg0YTRg9C90LrRhtC40Y4gYWRkU2NyaXB0KHNyYywgY2FsbGJhY2spLFxu0LrQvtGC0L7RgNCw0Y8g0LfQsNCz0YDRg9C20LDQtdGCINGB0LrRgNC40L/RgiDRgSDQtNCw0L3QvdGL0Lwgc3JjLCDQuCDQv9C+0YHQu9C1INC10LPQviDQt9Cw0LPRgNGD0LfQutC4IFxu0Lgg0LLRi9C/0L7Qu9C90LXQvdC40Y8g0LLRi9C30YvQstCw0LXRgiDRhNGD0L3QutGG0LjRjiBjYWxsYmFjay5cblxu0KHQtNC10LvQsNC7INGH0LXRgNC10Lcg0LzQvtC00LjRhNC40LrQsNGG0LjRjiDRhNGD0L3QutGG0LjQuCDQuNC3IHRhc2syXG4qL1xuXG5cbmZ1bmN0aW9uIHRhc2szICgpIHtcblxuICBsZXQgU291cmNlID0gZnVuY3Rpb24gKHR5cGUsIHNyYykge1xuICAgIGxldCBzb3VyY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHR5cGUpXG4gICAgc291cmNlLnNyYyA9IHNyY1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc291cmNlKVxuICAgIHJldHVybiBzb3VyY2VcbiAgfVxuICBcbiAgbGV0IHByZWxvYWRTb3VyY2VzID0gKHR5cGUsIHNvdXJjZXMsIGNhbGxiYWNrKSA9PiB7XG4gICAgbGV0IHByb21pc2VzID0gW11cblxuICAgIHNvdXJjZXMuZm9yRWFjaChzcmMgPT4ge1xuICAgICAgbGV0IHNvdXJjZSA9IFNvdXJjZSh0eXBlLCBzcmMpXG5cbiAgICAgIHByb21pc2VzLnB1c2gobmV3IFByb21pc2UoXG4gICAgICAgIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBzb3VyY2Uub25sb2FkID0gKCkgPT4gcmVzb2x2ZShgTG9hZGVkIGZyb20gJHtzb3VyY2Uuc3JjfWApXG4gICAgICAgICAgc291cmNlLm9uZXJyb3IgPSAoKSA9PiByZWplY3QoYE5vdCBsb2FkZWQgZnJvbSAke3NvdXJjZS5zcmN9YClcbiAgICAgICAgfVxuICAgICAgKSlcbiAgICB9KVxuXG4gICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKClcbiAgICAgIH0sXG4gICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKVxuICAgICAgfVxuICAgIClcbiAgfVxuXG4gIHByZWxvYWRTb3VyY2VzKCdzY3JpcHQnLCBcbiAgICBbXG4gICAgIFwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZDMvMy41LjEyL2QzLm1pbi5qc1wiLFxuICAgICBcImh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3JhcGhhZWwvMi4xLjQvcmFwaGFlbC1taW4uanNcIlxuICAgIF0sXG4gICAgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coZDMpXG4gICAgICBjb25zb2xlLmxvZyhSYXBoYWVsKDEwLCA1MCwgMzIwLCAyMDApKVxuICAgIH1cbiAgKVxuXG5cblxuICAvKlBhcnQgMy4yIChpbWFnZXMpKi9cblxuICB2YXIgc291cmNlcyA9IFtcbiAgICBcImh0dHBzOi8vanMuY3gvaW1hZ2VzLWxvYWQvMS5qcGdcIixcbiAgICBcImh0dHBzOi8vanMuY3gvaW1hZ2VzLWxvYWQvMi5qcGdcIixcbiAgICBcImh0dHBzOi8vanMuY3gvaW1hZ2VzLWxvYWQvMy5qcGdcIixcbiAgICBcImh0dHBzOi8vdXBsb2FkLndpa2ltZWRpYS5vcmcvd2lraXBlZGlhL2NvbW1vbnMvYy9jZi9Gcm9nX29uX3JpdmVyXzQwMDB4MzAwMF8yNi0wOS0yMDEwXzExLTAxYW1fMm1iLmpwZ1wiXG4gIF07XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlcy5sZW5ndGg7IGkrKykge1xuICAgIHNvdXJjZXNbaV0gKz0gJz8nICsgTWF0aC5yYW5kb20oKTsgLy8g0LTQvtCx0LDQstC70Y/QtdC8INC/0LDRgNCw0LzQtdGC0YAsINGH0YLQvtCx0Ysg0LHQtdC3INC60LXRiNCwICjQtNC70Y8g0YLQtdGB0YLQsClcbiAgfVxuXG4gIC8qKiDQtdGB0LvQuCDQutCw0YDRgtC40L3QutCwINC30LDQs9GA0YPQttC10L3QsCwg0YLQviDQvNC+0LbQvdC+INCx0YPQtNC10YIg0YHRgNCw0LfRgyDQv9C+0LvRg9GH0LjRgtGMINC10ZEg0YjQuNGA0LjQvdGDXG4gICAqINGB0L7Qt9C00LDQtNC40Lwg0LLRgdC1INC60LDRgNGC0LjQvdC60Lgg0Lgg0L/RgNC+0LLQtdGA0LjQvCwg0LXRgdGC0Ywg0LvQuCDRgyDQvdC40YUg0YjQuNGA0LjQvdCwXG4gICAqL1xuICBmdW5jdGlvbiB0ZXN0TG9hZGVkKHN0YXRlKSB7XG4gICAgdmFyIHdpZHRoU3VtID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgIGltZy5zcmMgPSBzb3VyY2VzW2ldO1xuICAgICAgd2lkdGhTdW0gKz0gaW1nLndpZHRoO1xuICAgIH1cbiAgICAvLyDQutCw0LbQtNC+0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSAxMDB4MTAwLCDQvtCx0YnQsNGPINGI0LjRgNC40L3QsCDQtNC+0LvQttC90LAg0LHRi9GC0YwgMzAwcHhcbiAgICBjb25zb2xlLmxvZyhzdGF0ZSwgd2lkdGhTdW0pO1xuICB9XG5cbiAgLy8g0LTQviDQt9Cw0LPRgNGD0LfQutC4IC0g0LLRi9Cy0LXQtNC10YIgMFxuICB0ZXN0TG9hZGVkKCdiZWZvcmUnKTtcblxuICAvLyDQv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60LggLSDQstGL0LLQtdC00LXRgiDRgdGD0LzQvNCw0YDQvdGD0Y4g0YjQuNGA0LjQvdGDINCy0YHQtdGFINC30LDQs9GA0YPQttC10L3QvdGL0YUg0LrQsNGA0YLQuNC90L7QulxuICBwcmVsb2FkU291cmNlcygnaW1nJywgc291cmNlcywgdGVzdExvYWRlZC5iaW5kKG51bGwsICdhZnRlcicpKTtcblxufVxuLy8gdGFzazMoKVxuXG5cblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
