'use strict';

/*
  script.onload / .onerror (ie8-)

    load - detects when script is loaded and executed
      
      inside load handler you have access to script:
        - functions 
        - variables ...

    error - when script load is fails (not execution errors!)


  Other resources:
    img - support load / error in all browsers

    iframe - only load event both for success / error states (all browsers)


  Loading external script:
    - create `script` container
    - set correct `src`
    - append container to body

*/

/* Task 1

Реализуйте «красивый» (HTML) аналог alt при помощи CSS/JavaScript,
который затем будет заменён картинкой сразу же как только она загрузится. 
А если загрузка не состоится – то не заменён.

Full decision: 
http://plnkr.co/edit/veEBilbP3YQOk5cJs2CG?p=preview
*/

function task1() {

  var handleImgLoad = function handleImgLoad(e) {
    var img = e.currentTarget;
    $$('.img-replace').filter(function (c) {
      return c.dataset.alt === img.src;
    }).forEach(function (c) {
      c.parentElement.replaceChild(img, c);
      img.classList.add('img-replace');
    });
  };

  $$('img').forEach(function (img) {
    img.addEventListener('load', handleImgLoad);
  });
}
// task1()

/*Task 2

Создайте функцию preloadImages(sources, callback),
которая предзагружает изображения из массива sources,
и после загрузки вызывает функцию callback.

Пример использования:
addScripts(["1.jpg", "2.jpg", "3.jpg"], callback);

Если вдруг возникает ошибка при загрузке – 
считаем такое изображение загруженным, чтобы не ломать поток выполнения.


Desicion: 
http://plnkr.co/edit/IHHqDRA0IPrW58SqJvfx?p=preview
*/

/*

Создайте функцию addScript(src, callback),
которая загружает скрипт с данным src, и после его загрузки 
и выполнения вызывает функцию callback.

Сделал через модификацию функции из task2
*/

function task3() {

  var Source = function Source(type, src) {
    var source = document.createElement(type);
    source.src = src;
    document.body.appendChild(source);
    return source;
  };

  var preloadSources = function preloadSources(type, sources, callback) {
    var promises = [];

    sources.forEach(function (src) {
      var source = Source(type, src);

      promises.push(new Promise(function (resolve, reject) {
        source.onload = function () {
          return resolve('Loaded from ' + source.src);
        };
        source.onerror = function () {
          return reject('Not loaded from ' + source.src);
        };
      }));
    });

    Promise.all(promises).then(function () {
      callback();
    }, function (error) {
      throw new Error(error);
    });
  };

  preloadSources('script', ["https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.12/d3.min.js", "https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js"], function () {
    console.log(d3);
    console.log(Raphael(10, 50, 320, 200));
  });

  /*Part 3.2 (images)*/

  var sources = ["https://js.cx/images-load/1.jpg", "https://js.cx/images-load/2.jpg", "https://js.cx/images-load/3.jpg", "https://upload.wikimedia.org/wikipedia/commons/c/cf/Frog_on_river_4000x3000_26-09-2010_11-01am_2mb.jpg"];
  for (var i = 0; i < sources.length; i++) {
    sources[i] += '?' + Math.random(); // добавляем параметр, чтобы без кеша (для теста)
  }

  /** если картинка загружена, то можно будет сразу получить её ширину
   * создадим все картинки и проверим, есть ли у них ширина
   */
  function testLoaded(state) {
    var widthSum = 0;
    for (var i = 0; i < sources.length; i++) {
      var img = document.createElement('img');
      img.src = sources[i];
      widthSum += img.width;
    }
    // каждое изображение 100x100, общая ширина должна быть 300px
    console.log(state, widthSum);
  }

  // до загрузки - выведет 0
  testLoaded('before');

  // после загрузки - выведет суммарную ширину всех загруженных картинок
  preloadSources('img', sources, testLoaded.bind(null, 'after'));
}
task3();
//# sourceMappingURL=data:application/json;base64,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akMsd0dBQXdHLENBQ3pHLENBQUM7QUFDRixPQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN2QyxXQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFBQyxHQUNuQzs7Ozs7QUFBQSxBQUtELFdBQVMsVUFBVSxDQUFDLEtBQUssRUFBRTtBQUN6QixRQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDakIsU0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDdkMsVUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN4QyxTQUFHLENBQUMsR0FBRyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyQixjQUFRLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQztLQUN2Qjs7QUFBQSxBQUVELFdBQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0dBQzlCOzs7QUFBQSxBQUdELFlBQVUsQ0FBQyxRQUFRLENBQUM7OztBQUFDLEFBR3JCLGdCQUFjLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0NBRWhFO0FBQ0QsS0FBSyxFQUFFLENBQUEiLCJmaWxlIjoicGFydDIvZXZlbnRzLzEwLmxvYWRfZXZlbnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAgc2NyaXB0Lm9ubG9hZCAvIC5vbmVycm9yIChpZTgtKVxuXG4gICAgbG9hZCAtIGRldGVjdHMgd2hlbiBzY3JpcHQgaXMgbG9hZGVkIGFuZCBleGVjdXRlZFxuICAgICAgXG4gICAgICBpbnNpZGUgbG9hZCBoYW5kbGVyIHlvdSBoYXZlIGFjY2VzcyB0byBzY3JpcHQ6XG4gICAgICAgIC0gZnVuY3Rpb25zIFxuICAgICAgICAtIHZhcmlhYmxlcyAuLi5cblxuICAgIGVycm9yIC0gd2hlbiBzY3JpcHQgbG9hZCBpcyBmYWlscyAobm90IGV4ZWN1dGlvbiBlcnJvcnMhKVxuXG5cbiAgT3RoZXIgcmVzb3VyY2VzOlxuICAgIGltZyAtIHN1cHBvcnQgbG9hZCAvIGVycm9yIGluIGFsbCBicm93c2Vyc1xuXG4gICAgaWZyYW1lIC0gb25seSBsb2FkIGV2ZW50IGJvdGggZm9yIHN1Y2Nlc3MgLyBlcnJvciBzdGF0ZXMgKGFsbCBicm93c2VycylcblxuXG4gIExvYWRpbmcgZXh0ZXJuYWwgc2NyaXB0OlxuICAgIC0gY3JlYXRlIGBzY3JpcHRgIGNvbnRhaW5lclxuICAgIC0gc2V0IGNvcnJlY3QgYHNyY2BcbiAgICAtIGFwcGVuZCBjb250YWluZXIgdG8gYm9keVxuXG4qL1xuXG5cblxuXG4vKiBUYXNrIDFcblxu0KDQtdCw0LvQuNC30YPQudGC0LUgwqvQutGA0LDRgdC40LLRi9C5wrsgKEhUTUwpINCw0L3QsNC70L7QsyBhbHQg0L/RgNC4INC/0L7QvNC+0YnQuCBDU1MvSmF2YVNjcmlwdCxcbtC60L7RgtC+0YDRi9C5INC30LDRgtC10Lwg0LHRg9C00LXRgiDQt9Cw0LzQtdC90ZHQvSDQutCw0YDRgtC40L3QutC+0Lkg0YHRgNCw0LfRgyDQttC1INC60LDQuiDRgtC+0LvRjNC60L4g0L7QvdCwINC30LDQs9GA0YPQt9C40YLRgdGPLiBcbtCQINC10YHQu9C4INC30LDQs9GA0YPQt9C60LAg0L3QtSDRgdC+0YHRgtC+0LjRgtGB0Y8g4oCTINGC0L4g0L3QtSDQt9Cw0LzQtdC90ZHQvS5cblxuRnVsbCBkZWNpc2lvbjogXG5odHRwOi8vcGxua3IuY28vZWRpdC92ZUVCaWxiUDNZUU9rNWNKczJDRz9wPXByZXZpZXdcbiovXG5cblxuZnVuY3Rpb24gdGFzazEgKCkge1xuXG4gIGxldCBoYW5kbGVJbWdMb2FkID0gZSA9PiB7XG4gICAgICBsZXQgaW1nID0gZS5jdXJyZW50VGFyZ2V0XG4gICAgICAkJCgnLmltZy1yZXBsYWNlJykuZmlsdGVyKGMgPT4gYy5kYXRhc2V0LmFsdCA9PT0gaW1nLnNyYylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjLnBhcmVudEVsZW1lbnQucmVwbGFjZUNoaWxkKGltZywgYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoJ2ltZy1yZXBsYWNlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICB9XG5cbiAgJCQoJ2ltZycpLmZvckVhY2goaW1nID0+IHtcbiAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGhhbmRsZUltZ0xvYWQpXG4gIH0pXG59XG4vLyB0YXNrMSgpXG5cblxuXG4vKlRhc2sgMlxuXG7QodC+0LfQtNCw0LnRgtC1INGE0YPQvdC60YbQuNGOIHByZWxvYWRJbWFnZXMoc291cmNlcywgY2FsbGJhY2spLFxu0LrQvtGC0L7RgNCw0Y8g0L/RgNC10LTQt9Cw0LPRgNGD0LbQsNC10YIg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQuNC3INC80LDRgdGB0LjQstCwIHNvdXJjZXMsXG7QuCDQv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0LLRi9C30YvQstCw0LXRgiDRhNGD0L3QutGG0LjRjiBjYWxsYmFjay5cblxu0J/RgNC40LzQtdGAINC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPOlxuYWRkU2NyaXB0cyhbXCIxLmpwZ1wiLCBcIjIuanBnXCIsIFwiMy5qcGdcIl0sIGNhbGxiYWNrKTtcblxu0JXRgdC70Lgg0LLQtNGA0YPQsyDQstC+0LfQvdC40LrQsNC10YIg0L7RiNC40LHQutCwINC/0YDQuCDQt9Cw0LPRgNGD0LfQutC1IOKAkyBcbtGB0YfQuNGC0LDQtdC8INGC0LDQutC+0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSDQt9Cw0LPRgNGD0LbQtdC90L3Ri9C8LCDRh9GC0L7QsdGLINC90LUg0LvQvtC80LDRgtGMINC/0L7RgtC+0Log0LLRi9C/0L7Qu9C90LXQvdC40Y8uXG5cblxuRGVzaWNpb246IFxuaHR0cDovL3BsbmtyLmNvL2VkaXQvSUhIcURSQTBJUHJXNThTcUp2Zng/cD1wcmV2aWV3XG4qL1xuXG5cblxuXG4vKlxuXG7QodC+0LfQtNCw0LnRgtC1INGE0YPQvdC60YbQuNGOIGFkZFNjcmlwdChzcmMsIGNhbGxiYWNrKSxcbtC60L7RgtC+0YDQsNGPINC30LDQs9GA0YPQttCw0LXRgiDRgdC60YDQuNC/0YIg0YEg0LTQsNC90L3Ri9C8IHNyYywg0Lgg0L/QvtGB0LvQtSDQtdCz0L4g0LfQsNCz0YDRg9C30LrQuCBcbtC4INCy0YvQv9C+0LvQvdC10L3QuNGPINCy0YvQt9GL0LLQsNC10YIg0YTRg9C90LrRhtC40Y4gY2FsbGJhY2suXG5cbtCh0LTQtdC70LDQuyDRh9C10YDQtdC3INC80L7QtNC40YTQuNC60LDRhtC40Y4g0YTRg9C90LrRhtC40Lgg0LjQtyB0YXNrMlxuKi9cblxuXG5mdW5jdGlvbiB0YXNrMyAoKSB7XG5cbiAgbGV0IFNvdXJjZSA9IGZ1bmN0aW9uICh0eXBlLCBzcmMpIHtcbiAgICBsZXQgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKVxuICAgIHNvdXJjZS5zcmMgPSBzcmNcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNvdXJjZSlcbiAgICByZXR1cm4gc291cmNlXG4gIH1cbiAgXG4gIGxldCBwcmVsb2FkU291cmNlcyA9ICh0eXBlLCBzb3VyY2VzLCBjYWxsYmFjaykgPT4ge1xuICAgIGxldCBwcm9taXNlcyA9IFtdXG5cbiAgICBzb3VyY2VzLmZvckVhY2goc3JjID0+IHtcbiAgICAgIGxldCBzb3VyY2UgPSBTb3VyY2UodHlwZSwgc3JjKVxuXG4gICAgICBwcm9taXNlcy5wdXNoKG5ldyBQcm9taXNlKFxuICAgICAgICAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgc291cmNlLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoYExvYWRlZCBmcm9tICR7c291cmNlLnNyY31gKVxuICAgICAgICAgIHNvdXJjZS5vbmVycm9yID0gKCkgPT4gcmVqZWN0KGBOb3QgbG9hZGVkIGZyb20gJHtzb3VyY2Uuc3JjfWApXG4gICAgICAgIH1cbiAgICAgICkpXG4gICAgfSlcblxuICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjYWxsYmFjaygpXG4gICAgICB9LFxuICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcilcbiAgICAgIH1cbiAgICApXG4gIH1cblxuICBwcmVsb2FkU291cmNlcygnc2NyaXB0JywgXG4gICAgW1xuICAgICBcImh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2QzLzMuNS4xMi9kMy5taW4uanNcIixcbiAgICAgXCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9yYXBoYWVsLzIuMS40L3JhcGhhZWwtbWluLmpzXCJcbiAgICBdLFxuICAgICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGQzKVxuICAgICAgY29uc29sZS5sb2coUmFwaGFlbCgxMCwgNTAsIDMyMCwgMjAwKSlcbiAgICB9XG4gIClcblxuXG5cbiAgLypQYXJ0IDMuMiAoaW1hZ2VzKSovXG5cbiAgdmFyIHNvdXJjZXMgPSBbXG4gICAgXCJodHRwczovL2pzLmN4L2ltYWdlcy1sb2FkLzEuanBnXCIsXG4gICAgXCJodHRwczovL2pzLmN4L2ltYWdlcy1sb2FkLzIuanBnXCIsXG4gICAgXCJodHRwczovL2pzLmN4L2ltYWdlcy1sb2FkLzMuanBnXCIsXG4gICAgXCJodHRwczovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zL2MvY2YvRnJvZ19vbl9yaXZlcl80MDAweDMwMDBfMjYtMDktMjAxMF8xMS0wMWFtXzJtYi5qcGdcIlxuICBdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZXMubGVuZ3RoOyBpKyspIHtcbiAgICBzb3VyY2VzW2ldICs9ICc/JyArIE1hdGgucmFuZG9tKCk7IC8vINC00L7QsdCw0LLQu9GP0LXQvCDQv9Cw0YDQsNC80LXRgtGALCDRh9GC0L7QsdGLINCx0LXQtyDQutC10YjQsCAo0LTQu9GPINGC0LXRgdGC0LApXG4gIH1cblxuICAvKiog0LXRgdC70Lgg0LrQsNGA0YLQuNC90LrQsCDQt9Cw0LPRgNGD0LbQtdC90LAsINGC0L4g0LzQvtC20L3QviDQsdGD0LTQtdGCINGB0YDQsNC30YMg0L/QvtC70YPRh9C40YLRjCDQtdGRINGI0LjRgNC40L3Rg1xuICAgKiDRgdC+0LfQtNCw0LTQuNC8INCy0YHQtSDQutCw0YDRgtC40L3QutC4INC4INC/0YDQvtCy0LXRgNC40LwsINC10YHRgtGMINC70Lgg0YMg0L3QuNGFINGI0LjRgNC40L3QsFxuICAgKi9cbiAgZnVuY3Rpb24gdGVzdExvYWRlZChzdGF0ZSkge1xuICAgIHZhciB3aWR0aFN1bSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICBpbWcuc3JjID0gc291cmNlc1tpXTtcbiAgICAgIHdpZHRoU3VtICs9IGltZy53aWR0aDtcbiAgICB9XG4gICAgLy8g0LrQsNC20LTQvtC1INC40LfQvtCx0YDQsNC20LXQvdC40LUgMTAweDEwMCwg0L7QsdGJ0LDRjyDRiNC40YDQuNC90LAg0LTQvtC70LbQvdCwINCx0YvRgtGMIDMwMHB4XG4gICAgY29uc29sZS5sb2coc3RhdGUsIHdpZHRoU3VtKTtcbiAgfVxuXG4gIC8vINC00L4g0LfQsNCz0YDRg9C30LrQuCAtINCy0YvQstC10LTQtdGCIDBcbiAgdGVzdExvYWRlZCgnYmVmb3JlJyk7XG5cbiAgLy8g0L/QvtGB0LvQtSDQt9Cw0LPRgNGD0LfQutC4IC0g0LLRi9Cy0LXQtNC10YIg0YHRg9C80LzQsNGA0L3Rg9GOINGI0LjRgNC40L3RgyDQstGB0LXRhSDQt9Cw0LPRgNGD0LbQtdC90L3Ri9GFINC60LDRgNGC0LjQvdC+0LpcbiAgcHJlbG9hZFNvdXJjZXMoJ2ltZycsIHNvdXJjZXMsIHRlc3RMb2FkZWQuYmluZChudWxsLCAnYWZ0ZXInKSk7XG5cbn1cbnRhc2szKClcblxuXG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
